[package]
name = "xavyo-webhooks"
version.workspace = true
edition.workspace = true
authors.workspace = true
license.workspace = true
publish.workspace = true
description = "Webhook delivery system for identity lifecycle event subscriptions"

[dependencies]
# Async runtime
tokio = { workspace = true }
async-trait = { workspace = true }

# Web framework
axum = { workspace = true }
tower = { workspace = true }

# Serialization
serde = { workspace = true }
serde_json = { workspace = true }

# OpenAPI documentation
utoipa = { workspace = true }

# Database
sqlx = { workspace = true }
xavyo-db = { path = "../xavyo-db" }

# HTTP client for webhook delivery
reqwest = { version = "0.12", features = ["json", "rustls-tls"], default-features = false }

# Encryption (AES-256-GCM for secret storage)
aes-gcm = "0.10"
rand = "0.8"

# HMAC-SHA256 signing
hmac = "0.12"
sha2 = "0.10"
hex = "0.4"

# Constant-time comparison for security
subtle = "2.5"

# Utilities
uuid = { workspace = true }
chrono = { workspace = true }
thiserror = { workspace = true }
tracing = { workspace = true }
base64 = { workspace = true }

# Validation
validator = { version = "0.20", features = ["derive"] }
url = "2.5"

# Internal dependencies
xavyo-core = { path = "../xavyo-core" }
xavyo-auth = { path = "../xavyo-auth" }
xavyo-tenant = { path = "../xavyo-tenant" }

# Graceful shutdown
tokio-util = { version = "0.7", features = ["rt"] }

[features]
integration = []

[dev-dependencies]
tokio = { workspace = true }
tokio-test = { workspace = true }
wiremock = "0.6"
