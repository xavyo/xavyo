{"responses":{"200":{"description":"Impact analysis result","content":{"application/json":{"schema":{"type":"object","description":"Response for policy impact analysis.","required":["policy_id","policy_name","summary","by_department","by_location","entitlement_impacts","affected_users","is_truncated"],"properties":{"affected_users":{"type":"array","items":{"type":"object","description":"Details of an affected user.","required":["user_id","impact_type","entitlements_gaining","entitlements_losing"],"properties":{"department":{"type":"string","description":"User's department.","nullable":true},"email":{"type":"string","description":"User email (if available).","nullable":true},"entitlements_gaining":{"type":"array","items":{"type":"string","format":"uuid"},"description":"Entitlements this user would gain."},"entitlements_losing":{"type":"array","items":{"type":"string","format":"uuid"},"description":"Entitlements this user would lose (if analyzing changes)."},"impact_type":{"type":"string","description":"Type of impact on a user.","enum":["gaining","losing","unchanged","mixed"],"title":"UserImpactType"},"location":{"type":"string","description":"User's location.","nullable":true},"user_id":{"type":"string","format":"uuid","description":"User ID."}},"title":"AffectedUser"},"description":"Sample of affected users (limited by `max_affected_users`)."},"by_department":{"type":"array","items":{"type":"object","description":"Impact breakdown by department.","required":["department","user_count","percentage"],"properties":{"department":{"type":"string","description":"Department name."},"percentage":{"type":"number","format":"double","description":"Percentage of total affected users."},"user_count":{"type":"integer","format":"int64","description":"Number of users affected in this department."}},"title":"DepartmentImpact"},"description":"Breakdown by department."},"by_location":{"type":"array","items":{"type":"object","description":"Impact breakdown by location.","required":["location","user_count","percentage"],"properties":{"location":{"type":"string","description":"Location name."},"percentage":{"type":"number","format":"double","description":"Percentage of total affected users."},"user_count":{"type":"integer","format":"int64","description":"Number of users affected in this location."}},"title":"LocationImpact"},"description":"Breakdown by location."},"entitlement_impacts":{"type":"array","items":{"type":"object","description":"Impact on a specific entitlement.","required":["entitlement_id","users_gaining","users_already_have"],"properties":{"entitlement_id":{"type":"string","format":"uuid","description":"Entitlement ID."},"entitlement_name":{"type":"string","description":"Entitlement name (if available).","nullable":true},"users_already_have":{"type":"integer","format":"int64","description":"Number of users who already have this entitlement."},"users_gaining":{"type":"integer","format":"int64","description":"Number of users who would receive this entitlement."}},"title":"EntitlementImpact"},"description":"Entitlement impact details."},"is_truncated":{"type":"boolean","description":"Whether the result was truncated due to `max_affected_users` limit."},"policy_id":{"type":"string","format":"uuid","description":"The policy being analyzed."},"policy_name":{"type":"string","description":"Policy name."},"summary":{"type":"object","description":"Summary of impact analysis.","required":["total_users_affected","users_gaining_access","users_losing_access","users_unchanged","total_entitlements_granted"],"properties":{"total_entitlements_granted":{"type":"integer","format":"int64","description":"Total entitlements that would be granted."},"total_users_affected":{"type":"integer","format":"int64","description":"Total number of users that would match the policy."},"users_gaining_access":{"type":"integer","format":"int64","description":"Number of users who would gain new entitlements."},"users_losing_access":{"type":"integer","format":"int64","description":"Number of users who would lose entitlements (if analyzing changes)."},"users_unchanged":{"type":"integer","format":"int64","description":"Number of users with no change."}},"title":"ImpactSummary"}},"title":"ImpactAnalysisResponse"}}}},"400":{"description":"Invalid request"},"401":{"description":"Unauthorized"},"404":{"description":"Policy not found"},"500":{"description":"Internal server error"}}}