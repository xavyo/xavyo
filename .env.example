# Xavyo Suite - Environment Configuration
# Copy this file to .env and customize for your environment

# =============================================================================
# Database Configuration
# =============================================================================
# PostgreSQL connection string
# Format: postgres://user:password@host:port/database
DATABASE_URL=postgres://xavyo:your_password_here@localhost:5432/xavyo

# Non-superuser database connection for RLS enforcement (optional)
# If set, API operations use this user (which has RLS enforced).
# Bootstrap/migrations always use DATABASE_URL (superuser).
# APP_DATABASE_URL=postgres://xavyo_app:your_password_here@localhost:5432/xavyo

# =============================================================================
# JWT Authentication
# =============================================================================
# Path to RSA private key for signing JWTs
JWT_PRIVATE_KEY_PATH=./keys/private.pem

# Path to RSA public key for verifying JWTs
JWT_PUBLIC_KEY_PATH=./keys/public.pem

# JWT issuer claim
JWT_ISSUER=https://idp.xavyo.com

# JWT audience claim
JWT_AUDIENCE=https://api.xavyo.com

# Access token expiration in seconds (default: 15 minutes)
JWT_ACCESS_TOKEN_EXPIRY=900

# Refresh token expiration in seconds (default: 7 days)
JWT_REFRESH_TOKEN_EXPIRY=604800

# =============================================================================
# Application Settings
# =============================================================================
# Rust log level (trace, debug, info, warn, error)
RUST_LOG=info

# API server host
API_HOST=0.0.0.0

# API server port
API_PORT=8080

# CORS allowed origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://localhost:3001

# =============================================================================
# Email Configuration
# =============================================================================
# For local development, use Mailpit (docker compose up -d):
#   Web UI: http://localhost:8025  |  SMTP: localhost:1025
EMAIL_SMTP_HOST=localhost
EMAIL_SMTP_PORT=1025
EMAIL_SMTP_USERNAME=dev
EMAIL_SMTP_PASSWORD=dev
EMAIL_SMTP_TLS=false
EMAIL_FROM_ADDRESS=noreply@xavyo.local
EMAIL_FROM_NAME=xavyo
FRONTEND_BASE_URL=http://localhost:3000

# For production, use a real SMTP provider:
# EMAIL_SMTP_HOST=smtp.example.com
# EMAIL_SMTP_PORT=587
# EMAIL_SMTP_TLS=true
# EMAIL_SMTP_USERNAME=your-username
# EMAIL_SMTP_PASSWORD=your-password
# EMAIL_FROM_ADDRESS=noreply@yourdomain.com
# FRONTEND_BASE_URL=https://app.yourdomain.com

# Optional email path overrides:
# PASSWORD_RESET_PATH=/auth/reset-password
# EMAIL_VERIFY_PATH=/auth/verify-email
# MAGIC_LINK_PATH=/auth/passwordless/verify

# =============================================================================
# Test Environment (used by integration tests)
# =============================================================================
# Set to "true" to enable test mode
TEST_MODE=false
