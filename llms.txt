# xavyo

> Unified identity platform for humans, machines, and AI agents. Built in Rust with multi-tenant PostgreSQL.

## Documentation

- [Documentation Site](docs-site/): Comprehensive Docusaurus docs (866 pages) â€” run `cd docs-site && npm run serve`
- [Architecture](docs/ARCHITECTURE.md): System overview and design principles
- [INSTALL](INSTALL.md): Development environment setup
- [Crate Index](docs/crates/index.md): All 32 crates organized by layer
- [Maturity Matrix](docs/crates/maturity-matrix.md): Crate stability assessment
- [Dependency Graph](docs/crates/dependency-graph.md): How crates relate
- [OpenAPI Spec](docs/api/openapi.json): 700 paths, 933 operations

## Documentation Site Structure

The `docs-site/` contains a full Docusaurus documentation site:

- **Getting Started**: [What is xavyo](docs-site/docs/getting-started/what-is-xavyo.md), [Key Concepts](docs-site/docs/getting-started/key-concepts.md), [Quick Tour](docs-site/docs/getting-started/quick-tour.md)
- **Admin Guides**: [Tenant Setup](docs-site/docs/guides/admin/tenant-setup.md), [Users](docs-site/docs/guides/admin/user-management.md), [Authentication](docs-site/docs/guides/admin/authentication.md), [Authorization](docs-site/docs/guides/admin/authorization.md), [Connectors](docs-site/docs/guides/admin/connectors.md), [Governance](docs-site/docs/guides/admin/governance.md), [Security](docs-site/docs/guides/admin/security-hardening.md), [NHI](docs-site/docs/guides/admin/nhi-management.md)
- **Developer Guides**: [API Overview](docs-site/docs/guides/developer/api-overview.md), [Auth Flows](docs-site/docs/guides/developer/authentication-flows.md), [SCIM](docs-site/docs/guides/developer/scim-integration.md), [Webhooks](docs-site/docs/guides/developer/webhooks.md), [NHI](docs-site/docs/guides/developer/nhi-machine-identities.md)
- **End User Guides**: [Self-Service](docs-site/docs/guides/end-user/self-service.md), [MFA Setup](docs-site/docs/guides/end-user/mfa-setup.md), [Access Requests](docs-site/docs/guides/end-user/access-requests.md)
- **Concepts**: [IGA](docs-site/docs/concepts/identity-governance.md), [Zero Trust](docs-site/docs/concepts/zero-trust.md), [Multi-Tenancy](docs-site/docs/concepts/multi-tenancy.md), [Lifecycle](docs-site/docs/concepts/lifecycle-management.md), [SoD](docs-site/docs/concepts/separation-of-duties.md), [NHI](docs-site/docs/concepts/non-human-identities.md), [GDPR](docs-site/docs/concepts/compliance-gdpr.md)
- **Reference**: [Error Codes](docs-site/docs/reference/error-codes.md), [Rate Limits](docs-site/docs/reference/rate-limits.md), [Glossary](docs-site/docs/reference/glossary.md), 837 auto-generated API pages

## Test Suite

- **1,755 functional tests** across 12 batches: `tests/functional/run-all-batches.sh`
- **177 comprehensive API tests**: `tests/functional/test-all-endpoints.sh`

## Maturity Legend

- ðŸŸ¢ **stable** â€” Production-ready, well-tested
- ðŸŸ¡ **beta** â€” Functional, may have gaps
- ðŸ”´ **alpha** â€” Experimental, incomplete

## Crate Layers

### Foundation (6 crates)
- [xavyo-core](crates/xavyo-core/CRATE.md): ðŸŸ¢ Shared types (TenantId, UserId, errors)
- [xavyo-auth](crates/xavyo-auth/CRATE.md): ðŸŸ¢ JWT, password hashing, JWKS
- [xavyo-db](crates/xavyo-db/CRATE.md): ðŸŸ¢ PostgreSQL with RLS
- [xavyo-tenant](crates/xavyo-tenant/CRATE.md): ðŸŸ¢ Multi-tenant middleware
- [xavyo-events](crates/xavyo-events/CRATE.md): ðŸŸ¢ Kafka event bus
- [xavyo-nhi](crates/xavyo-nhi/CRATE.md): ðŸŸ¢ Non-human identity types and traits

### Domain (8 crates)
- [xavyo-connector](crates/xavyo-connector/CRATE.md): ðŸŸ¢ Connector framework
- [xavyo-provisioning](crates/xavyo-provisioning/CRATE.md): ðŸŸ¡ Sync engine
- [xavyo-governance](crates/xavyo-governance/CRATE.md): ðŸŸ¢ IGA logic
- [xavyo-authorization](crates/xavyo-authorization/CRATE.md): ðŸŸ¡ Policy engine
- [xavyo-webhooks](crates/xavyo-webhooks/CRATE.md): ðŸŸ¡ Event delivery
- [xavyo-siem](crates/xavyo-siem/CRATE.md): ðŸŸ¡ Audit export
- [xavyo-secrets](crates/xavyo-secrets/CRATE.md): ðŸŸ¢ Secret providers
- [xavyo-scim-client](crates/xavyo-scim-client/CRATE.md): ðŸŸ¢ Outbound SCIM

### Connectors (4 crates)
- [xavyo-connector-ldap](crates/xavyo-connector-ldap/CRATE.md): ðŸŸ¢ LDAP/AD
- [xavyo-connector-entra](crates/xavyo-connector-entra/CRATE.md): ðŸŸ¢ Microsoft Entra
- [xavyo-connector-rest](crates/xavyo-connector-rest/CRATE.md): ðŸ”´ REST APIs
- [xavyo-connector-database](crates/xavyo-connector-database/CRATE.md): ðŸ”´ Databases

### API (14 crates)
- [xavyo-api-auth](crates/xavyo-api-auth/CRATE.md): ðŸŸ¢ Auth endpoints
- [xavyo-api-oauth](crates/xavyo-api-oauth/CRATE.md): ðŸŸ¢ OAuth2/OIDC provider
- [xavyo-api-users](crates/xavyo-api-users/CRATE.md): ðŸŸ¢ User management
- [xavyo-api-scim](crates/xavyo-api-scim/CRATE.md): ðŸŸ¡ SCIM provisioning
- [xavyo-api-saml](crates/xavyo-api-saml/CRATE.md): ðŸŸ¡ SAML IdP
- [xavyo-api-social](crates/xavyo-api-social/CRATE.md): ðŸŸ¡ Social login
- [xavyo-api-agents](crates/xavyo-api-agents/CRATE.md): ðŸŸ¢ AI agent security
- [xavyo-api-governance](crates/xavyo-api-governance/CRATE.md): ðŸŸ¢ IGA API
- [xavyo-api-connectors](crates/xavyo-api-connectors/CRATE.md): ðŸŸ¡ Connector API
- [xavyo-api-tenants](crates/xavyo-api-tenants/CRATE.md): ðŸŸ¢ Tenant management
- [xavyo-api-authorization](crates/xavyo-api-authorization/CRATE.md): ðŸ”´ Authz API
- [xavyo-api-import](crates/xavyo-api-import/CRATE.md): ðŸŸ¢ Bulk import
- [xavyo-api-oidc-federation](crates/xavyo-api-oidc-federation/CRATE.md): ðŸŸ¡ OIDC federation
- [xavyo-api-nhi](crates/xavyo-api-nhi/CRATE.md): ðŸŸ¢ Non-human identity API

## Quick Reference

### Multi-Tenancy Pattern
Every handler extracts tenant from JWT claims:
```rust
use xavyo_auth::JwtClaims;
use axum::Extension;

async fn handler(Extension(claims): Extension<JwtClaims>) -> Result<...> {
    let tenant_id = claims.tenant_id()?.as_uuid();
    // Use tenant_id in all DB queries
}
```

### Error Handling
All crates use `thiserror` with domain-specific error types.

### Database Queries
Always include `tenant_id` in WHERE clauses:
```sql
SELECT * FROM resources WHERE tenant_id = $1 AND id = $2;
```

### Feature Flags
Common flags across crates:
- `kafka` - Enable Kafka event streaming
- `openapi` - Generate OpenAPI/utoipa documentation
- `test-utils` - Include test helpers
